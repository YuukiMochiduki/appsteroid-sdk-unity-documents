# インゲーム　テキストチャットについて

## はじめに
インゲームテキストチャットは、ゲーム中にリアルタイムでグループ間でテキストチャットを行う機能です。
テキストチャットはグループメッセージを介して行われます。

## 手順とサンプル

#### 事前準備
* AppSteroid の機能を利用するには、[GettingStarted](GettingStarted.md) に説明する初期設定を行っておく必要があります。
* グループメッセージはプッシュ通知を介して行われますので プッシュ通知の設定（[iOS]([Unity-iOS]プッシュ通知の設定方法.md) / [Android]([Unity-Android]プッシュ通知の設定方法.md))を行っておく必要があります。

#### グループメッセージの受信
1. グループメッセージ作成時に発火するイベントを登録
2. グループメッセージ作成イベントを処理する

##### サンプルコード

    void OnEnable()
    {
        // グループメッセージ作成イベントを登録
        FASEvent.OnGroupMessageInGameCreated += OnGroupMessageInGameCreated;
    }
    
    void OnDisable()
    {
        // グループメッセージ作成イベントを解除
        FASEvent.OnGroupMessageInGameCreated -= OnGroupMessageInGameCreated;
    }
    
    // グループメッセージ作成時に、グループメッセージモデルを引数に呼び出される
    void OnGroupMessageInGameCreated(GroupMessage groupMessage)
    {
        Debug.Log("In Game chat : " + groupMessage.User.Name + " : " + groupMessage.Text);
    }


#### グループメッセージの送信

##### サンプルコード

    // グループメッセージの送信
    FASGroup.SendGroupMessageInGames(groupId, "chat text", (groupMessage, error)=>
    {
        if (error != null) // 送信エラー
        {
            Debug.LogError(error.ToString());
        }
        else // 送信成功
        {
            Debug.Log(groupMessage.Text);
        }
    });
